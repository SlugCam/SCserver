<!DOCTYPE html><html lang="en"><head><title>repl</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="repl"><meta name="groc-project-path" content="repl.js"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path">repl.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="repljs">repl.js</h1></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Provides an interactive environment for testing SWEETnet components.</p></div></div><div class="code"><div class="wrapper"><span class="kd">var</span> <span class="nx">colors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">repl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;repl&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;vm&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">readline</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;readline&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">hasAnsi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;has-ansi&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">stripAnsi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;strip-ansi&#39;</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>http://stackoverflow.com/questions/23569878/adding-color-to-repl-prompt-node</p></div></div><div class="code"><div class="wrapper"><span class="kd">var</span> <span class="nx">_setPrompt</span> <span class="o">=</span> <span class="nx">readline</span><span class="p">.</span><span class="nx">Interface</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setPrompt</span><span class="p">;</span>
<span class="nx">readline</span><span class="p">.</span><span class="nx">Interface</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setPrompt</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">hasAnsi</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">_setPrompt</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">stripAnsi</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">length</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">_setPrompt</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Welcome to &#39;</span> <span class="o">+</span> <span class="s1">&#39;SWEET&#39;</span><span class="p">.</span><span class="nx">bold</span> <span class="o">+</span> <span class="s1">&#39;net! Type &#39;</span> <span class="o">+</span> <span class="s1">&#39;help()&#39;</span><span class="p">.</span><span class="nx">underline</span> <span class="o">+</span>
    <span class="s1">&#39; for help.&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;==========================================&#39;</span><span class="p">.</span><span class="nx">rainbow</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">SWEETrepl</span> <span class="o">=</span> <span class="nx">repl</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;SWEETnet&#39;</span><span class="p">.</span><span class="nx">blue</span> <span class="o">+</span> <span class="s1">&#39; $ &#39;</span><span class="p">);</span>

<span class="nx">vm</span><span class="p">.</span><span class="nx">runInContext</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;./util/repl_setup.js&#39;</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">),</span> <span class="nx">SWEETrepl</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>

<span class="nx">SWEETrepl</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">help</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;================================================================================&#39;</span><span class="p">.</span><span class="nx">rainbow</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;SWEET&#39;</span><span class="p">.</span><span class="nx">bold</span> <span class="o">+</span> <span class="s1">&#39;net Online Help ðŸŒº&#39;</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\nThis repl is just an enhanced node repl with some handy objects preloaded,&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;think of this as a shell into the SWEETnet system. Some of the objects include:&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\n\t&#39;</span> <span class="o">+</span> <span class="s1">&#39;config&#39;</span><span class="p">.</span><span class="nx">bold</span> <span class="o">+</span> <span class="s1">&#39; - the configuration file defined at the root of the project&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\t&#39;</span> <span class="o">+</span> <span class="s1">&#39;bot.create(name)&#39;</span><span class="p">.</span><span class="nx">bold</span> <span class="o">+</span> <span class="s1">&#39; - creates a bot with given name&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\nThe server objects are all provided:&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\n\t&#39;</span> <span class="o">+</span> <span class="s1">&#39;apiServer&#39;</span><span class="p">.</span><span class="nx">bold</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\t&#39;</span> <span class="o">+</span> <span class="s1">&#39;messageServer&#39;</span><span class="p">.</span><span class="nx">bold</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\t&#39;</span> <span class="o">+</span> <span class="s1">&#39;videoServer&#39;</span><span class="p">.</span><span class="nx">bold</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\nEach of these has a listen and start method. The listen method takes a port as&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;argument and starts the server. The start method starts the server an the port&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;as given in the configuration file.&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\nb1, b2, b3, b4 are preconstructed bots for testing.&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\nTab complete can be used to explore methods on these objects.&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;================================================================================&#39;</span><span class="p">.</span><span class="nx">rainbow</span><span class="p">);</span>
<span class="p">};</span></div></div></div></div></body></html>